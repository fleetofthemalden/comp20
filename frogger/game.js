var canvas,ctx,spriteSheet=new Image;spriteSheet.src="assets/frogger_sprites.png";var w1=120,w2=153,w3=186,w4=219,w5=250,r1=315,r2=348,r3=381,r4=414,r5=450,p1=485,p2=282,g3=85,fx_i=184,fy_i=485,frog,fypos,collision,lv=1,lives=3,score=0,hi_score=0,scalar=399,c_scale=1197,delay=75,position=40,timeout=0;function start_game(){frog_init();canvas_init();play_game()}
function canvas_init(){canvas=document.getElementById("game_canvas");ctx=canvas.getContext("2d");ctx.fillStyle="#191970";ctx.fillRect(2,2,395,280);ctx.fillStyle="#000000";ctx.fillRect(2,310,395,253);ctx.fillStyle="#00FF00";ctx.font="20pt Helvetica";ctx.fillText("Level:",95,535);ctx.fillText(lv,185,535);ctx.font="14pt Helvetica";ctx.fillText("Score:                  Highscore:",2,560);ctx.drawImage(spriteSheet,13,12,324,35,25,16,324,34);ctx.drawImage(spriteSheet,0,55,399,55,2,60,395,55);ctx.drawImage(spriteSheet,
0,119,399,35,2,279,395,35);ctx.drawImage(spriteSheet,0,119,399,35,2,480,395,35);display_lives();ctx.save()}
function frog_init(){frog={};frog.fx=fx_i;frog.fy=fy_i;frog.rel=fx_i;frog.draw=draw_frog_static_up;var a={fun:function(){return!0},clear:function(){}};fypos={};fypos[p1]=[p1,r5,function(a){},function(){return 0},a,"fun"];fypos[r5]=[p1,r4,function(a){},function(){return 0},new_collision(),"roadsafe"];fypos[r4]=[r5,r3,function(a){},function(){return 0},new_collision(),"roadsafe"];fypos[r3]=[r4,r2,function(a){},function(){return 0},new_collision(),"roadsafe"];fypos[r2]=[r3,r1,function(a){},function(){return 0},
new_collision(),"roadsafe"];fypos[r1]=[r2,p2,function(a){},function(){return 0},new_collision(),"roadsafe"];fypos[p2]=[r1,w5,function(a){},function(){return 0},a,"fun"];fypos[w5]=[p2,w4,function(a){this.wx=a},function(){return this.wx},new_collision(),"riversafe"];fypos[w4]=[w5,w3,function(a){this.wx=a},function(){return this.wx},new_collision(),"riversafe"];fypos[w3]=[w4,w2,function(a){this.wx=a},function(){return this.wx},new_collision(),"riversafe"];fypos[w2]=[w3,w1,function(a){this.wx=a},function(){return this.wx},
new_collision(),"riversafe"];fypos[w1]=[w2,g3,function(a){this.wx=a},function(){return this.wx},new_collision(),"riversafe"];fypos[g3]=[w1,g3,function(a){},function(){return 0},new_collision(),"home"];fypos[g3][4].loc=[[13,40],[97,128],[183,210],[267,300],[349,375]];fypos[g3][4].clear=a.clear;document.addEventListener("keyup",key_handle)}
function new_collision(){return{loc:[],add:function(a,b){this.loc.push([a,b])},roadsafe:function(){var a=this.loc.length,b,c;for(i=0;i<a;i++)if(b=this.loc[i][0],c=this.loc[i][1],frog.fx<c-3&&(frog.fx+23>b+3||frog.fx>b+3))return!1;return!0},riversafe:function(){var a=this.loc.length,b,c;for(i=0;i<a;i++)if(b=this.loc[i][0],c=this.loc[i][1],frog.fx>=b-3&&frog.fx+23<=c+3)return!0;return!1},home:function(){var a=this.loc.length,b,c;for(i=0;i<a;i++)if(b=this.loc[i][0],c=this.loc[i][1],frog.fx>=b-3&&frog.fx+
23<=c+3)return score+=50,b=this.loc.slice(0,i),a=this.loc.slice(i+1,a),this.loc=b.concat(a),1>this.loc.length&&(fypos[g3][4].loc=[[13,40],[97,128],[183,210],[267,300],[349,375]],score+=1E3,lv++,hi_score=score,lives=3,scalar=2==lv?359:scalar+80),frog.fx=fx_i,frog.fy=fy_i,frog.rel=fx_i,frog.draw=draw_frog_static_up,!0;return!1},clear:function(){this.loc=null;this.loc=[]},fun:function(){return!0}}}function collision_check(){fypos[frog.fy][4][fypos[frog.fy][5]]()||lose_life()}
function key_handle(a){37==a.keyCode?frog_move_left():38==a.keyCode?frog_move_up():39==a.keyCode?frog_move_right():40==a.keyCode&&frog_move_down()}function play_game(){setInterval(render_all,delay)}function render_all(){draw_canvas();position=position%c_scale+2;draw_1x_speed(position);draw_2x_speed(position);draw_3x_speed(position);fx_update();collision_check();frog.draw()}
function fx_update(){var a=frog.rel+fypos[frog.fy][3]();75>Math.abs(a-frog.fx)?frog.fx=a:frog.rel=frog.fx-fypos[frog.fy][3]();2>frog.fx&&lose_life();390<frog.fx&&lose_life()}function frog_move_up(){draw_frog_move_up();frog.fy=fypos[frog.fy][1];frog.rel=frog.fx-fypos[frog.fy][3]();frog.draw=draw_frog_move_up;score+=10;fypos[frog.fy][4].clear()}
function frog_move_down(){draw_frog_move_down();frog.fy=fypos[frog.fy][0];frog.rel=frog.fx-fypos[frog.fy][3]();frog.draw=draw_frog_move_down;fypos[frog.fy][4].clear()}function frog_move_right(){draw_frog_move_right();frog.rel+=25;frog.draw=draw_frog_move_right;fypos[frog.fy][4].clear()}function frog_move_left(){draw_frog_move_left();frog.rel-=25;frog.draw=draw_frog_move_left;fypos[frog.fy][4].clear()}function game_over(){alert("Game Over. Your Score: "+score);document.location.reload(!0)}
function openHiScoreWin(){myWindow=window.open("","","width=200,height=100");myWindow.document.write("<p>This is 'myWindow'</p>");myWindow.focus()}function lose_life(){ctx.drawImage(spriteSheet,208,171,22,24,frog.fx,frog.fy,23,22);ctx.drawImage(spriteSheet,208,171,22,24,frog.fx,frog.fy,23,22);0==lives&&game_over();ctx.drawImage(spriteSheet,208,171,22,24,frog.fx,frog.fy,23,22);lives-=1;frog.fx=fx_i;frog.fy=fy_i;rel=fx_i;frog.draw=draw_frog_static_up}
function display_score(){9999<score-hi_score&&(lives=5);ctx.fillStyle="#00FF00";ctx.font="14pt Helvetica";ctx.fillText(score,80,560);ctx.fillText(hi_score,255,560)}function display_lives(){for(var a=28*lives+4;0<a;)a-=28,draw_frog_life(a,516)}
function draw_canvas(){ctx.clearRect(0,0,399,565);ctx.fillStyle="#191970";ctx.fillRect(2,2,395,280);ctx.fillStyle="#000000";ctx.fillRect(2,310,395,253);ctx.fillStyle="#00FF00";ctx.font="20pt Helvetica";ctx.fillText("Level:",95,535);ctx.fillText(lv,185,535);ctx.font="14pt Helvetica";ctx.fillText("Score:                  Highscore:",2,560);ctx.drawImage(spriteSheet,13,12,324,35,25,16,324,34);ctx.drawImage(spriteSheet,0,55,399,55,2,60,395,55);ctx.drawImage(spriteSheet,0,119,399,35,2,279,395,35);ctx.drawImage(spriteSheet,
0,119,399,35,2,480,395,35);display_score();display_lives();draw_lily_pads()}function draw(a,b,c,g,d,e,f,h){ctx.drawImage(spriteSheet,a,b,c,g,d,e,f,h);400>d&&0<d&&fypos[e][4].add(d,f+d)}function draw_frog_life(a,b){ctx.drawImage(spriteSheet,11,368,22,22,a,b,23,22)}function draw_frog_static_up(){ctx.drawImage(spriteSheet,11,368,22,22,frog.fx,frog.fy,23,22)}function draw_frog_static_down(){ctx.drawImage(spriteSheet,79,368,22,21,frog.fx,frog.fy,23,22)}
function draw_frog_static_left(){ctx.drawImage(spriteSheet,81,335,21,22,frog.fx,frog.fy,22,23)}function draw_frog_static_right(){ctx.drawImage(spriteSheet,12,335,21,22,frog.fx,frog.fy,22,23)}function draw_frog_move_up(){ctx.drawImage(spriteSheet,45,365,24,24,frog.fx,frog.fy,25,25);frog.draw=draw_frog_static_up}function draw_frog_move_down(){ctx.drawImage(spriteSheet,113,365,24,24,frog.fx,frog.fy,25,25);frog.draw=draw_frog_static_down}
function draw_frog_move_left(){ctx.drawImage(spriteSheet,112,338,24,24,frog.fx,frog.fy,25,25);frog.draw=draw_frog_static_left}function draw_frog_move_right(){ctx.drawImage(spriteSheet,42,336,24,24,frog.fx,frog.fy,25,25);frog.draw=draw_frog_static_right}
function draw_1x_speed(a){var b=a;fypos[w4][2](b);fypos[w4][4].clear();fypos[r2][4].clear();fypos[r5][4].clear();for(i=0;4>i;i++)draw_logs_short(b),draw_white_cars(b),draw_tractor_things(b),b-=scalar;b=scalar-a;for(i=0;4>i;i++)draw_yellow_cars(b),b+=scalar}
function draw_2x_speed(a){var b=3*a/2,c=3*scalar/2;fypos[w1][2](b);fypos[w1][4].clear();for(i=0;4>i;i++)draw_logs_med(b),b-=c;b=c-3*a/2;fypos[w2][2](b);fypos[w5][2](b);fypos[w2][4].clear();fypos[w5][4].clear();fypos[r1][4].clear();fypos[r3][4].clear();for(i=0;4>i;i++)draw_double_turtles(b),draw_triple_turtles(b),draw_trucks(b),draw_pink_cars(b),b+=c}function draw_3x_speed(a){a*=2;var b=2*scalar;fypos[w3][2](a);fypos[w3][4].clear();for(i=0;4>i;i++)draw_logs_long(a),a-=b}
function draw_lily_pads(){var a=[13,97,183,267,349];for(i=0;5>i;i++)ctx.drawImage(spriteSheet,9,265,30,24,a[i],g3,30,24);var a=fypos[g3][4].loc.length,b;ctx.fillStyle="#191970";for(i=0;i<a;i++)b=fypos[g3][4].loc[i][0],ctx.fillRect(b,g3,30,24)}function draw_logs_long(a){draw(0,165,185,24,a,w3,185,24);draw(0,165,185,24,a+240,w3,185,24)}function draw_logs_med(a){draw(0,196,125,24,a,w1,125,24);draw(0,196,125,24,a+180,w1,125,24);draw(0,196,125,24,a+360,w1,125,24)}
function draw_logs_short(a){draw(0,230,93,24,a,w4,93,24);draw(0,230,93,24,a+150,w4,93,24);draw(0,230,93,24,a+300,w4,93,24)}function draw_double_turtles_pos1(a){draw(14,406,32,22,a,w2,32,22);draw(14,406,32,22,a-38,w2,32,22)}function draw_double_turtles_pos2(a){draw(52,406,32,22,a,w2,32,22);draw(52,406,32,22,a-38,w2,32,22)}function draw_double_turtles_pos3(a){draw(93,406,32,22,a,w2,32,22);draw(93,406,32,22,a-38,w2,32,22)}
function draw_2_dive_turtles_pos3(a){draw(133,406,32,22,a,w2,32,22);draw(133,406,32,22,a-38,w2,32,22)}function draw_2_dive_turtles_pos4(a){draw(175,407,32,22,a,w2,32,22);draw(175,407,32,22,a-38,w2,32,22)}function draw_w2_turtles_pos1(a){draw_double_turtles_pos1(a);draw_double_turtles_pos1(a-130);draw_double_turtles_pos1(a-260)}function draw_w2_turtles_pos2(a){draw_double_turtles_pos2(a);draw_double_turtles_pos2(a-130);draw_double_turtles_pos2(a-260)}
function draw_w2_turtles_pos3(a){draw_2_dive_turtles_pos3(a);draw_double_turtles_pos3(a-130);draw_double_turtles_pos3(a-260)}function draw_w2_turtles_pos4(a){draw_2_dive_turtles_pos4(a);draw_double_turtles_pos1(a-130);draw_double_turtles_pos1(a-260)}function draw_w2_turtles_pos5(a){draw_double_turtles_pos2(a-260);draw_double_turtles_pos2(a-130)}function draw_w2_turtles_pos6(a){draw_2_dive_turtles_pos4(a);draw_double_turtles_pos3(a-130);draw_double_turtles_pos3(a-260)}
function draw_double_turtles(a){18>Math.abs(a)%108?draw_w2_turtles_pos6(a):36>Math.abs(a)%108?draw_w2_turtles_pos5(a):54>Math.abs(a)%108?draw_w2_turtles_pos4(a):72>Math.abs(a)%108?draw_w2_turtles_pos3(a):90>Math.abs(a)%108?draw_w2_turtles_pos2(a):draw_w2_turtles_pos1(a)}function draw_triple_turtles_pos1(a){draw(14,406,32,22,a-38,w5,32,22);draw(14,406,32,22,a,w5,32,22);draw(14,406,32,22,a-76,w5,32,22)}
function draw_triple_turtles_pos2(a){draw(52,406,32,22,a-38,w5,32,22);draw(52,406,32,22,a,w5,32,22);draw(52,406,32,22,a-76,w5,32,22)}function draw_triple_turtles_pos3(a){draw(93,406,32,22,a-38,w5,32,22);draw(93,406,32,22,a,w5,32,22);draw(93,406,32,22,a-76,w5,32,22)}function draw_3_dive_turtles_pos3(a){draw(133,406,32,22,a-38,w5,32,22);draw(133,406,32,22,a,w5,32,22);draw(133,406,32,22,a-76,w5,32,22)}
function draw_3_dive_turtles_pos4(a){draw(175,407,32,22,a-38,w5,32,22);draw(175,407,32,22,a,w5,32,22);draw(175,407,32,22,a-76,w5,32,22)}function draw_w5_turtles_pos1(a){draw_triple_turtles_pos1(a);draw_triple_turtles_pos1(a-130);draw_triple_turtles_pos1(a-260)}function draw_w5_turtles_pos2(a){draw_triple_turtles_pos2(a);draw_triple_turtles_pos2(a-130);draw_triple_turtles_pos2(a-260)}
function draw_w5_turtles_pos3(a){draw_triple_turtles_pos3(a);draw_triple_turtles_pos3(a-130);draw_3_dive_turtles_pos3(a-260)}function draw_w5_turtles_pos4(a){draw_triple_turtles_pos1(a);draw_triple_turtles_pos1(a-130);draw_3_dive_turtles_pos4(a-260)}function draw_w5_turtles_pos5(a){draw_triple_turtles_pos2(a);draw_triple_turtles_pos2(a-130)}function draw_w5_turtles_pos6(a){draw_triple_turtles_pos3(a);draw_triple_turtles_pos3(a-130);draw_3_dive_turtles_pos4(a-260)}
function draw_triple_turtles(a){18>Math.abs(a)%108?draw_w5_turtles_pos6(a):36>Math.abs(a)%108?draw_w5_turtles_pos5(a):54>Math.abs(a)%108?draw_w5_turtles_pos4(a):72>Math.abs(a)%108?draw_w5_turtles_pos3(a):90>Math.abs(a)%108?draw_w5_turtles_pos2(a):draw_w5_turtles_pos1(a)}function draw_trucks(a){draw(104,300,50,24,a,r1,50,24);draw(104,300,50,24,a-150,r1,50,24)}function draw_white_cars(a){draw(45,265,30,24,a,r2,30,24);draw(45,265,30,24,a+80,r2,30,24)}
function draw_pink_cars(a){draw(9,265,30,24,a,r3,30,24);draw(9,265,30,24,a-100,r3,30,24);draw(9,265,30,24,a-200,r3,30,24);draw(9,265,30,24,a-300,r3,30,24)}function draw_tractor_things_pos1(a){draw(9,300,30,24,a+200,r4,30,24);draw(9,300,30,24,a,r4,30,24);draw(9,300,30,24,a+100,r4,30,24)}function draw_tractor_things_pos2(a){draw(40,300,30,24,a+200,r4,30,24);draw(40,300,30,24,a,r4,30,24);draw(40,300,30,24,a+100,r4,30,24)}
function draw_tractor_things_pos3(a){draw(72,300,30,24,a+200,r4,30,24);draw(72,300,30,24,a,r4,30,24);draw(72,300,30,24,a+100,r4,30,24)}function draw_tractor_things(a){3>a%9?draw_tractor_things_pos1(a):6>a%9?draw_tractor_things_pos2(a):draw_tractor_things_pos3(a)}function draw_yellow_cars(a){draw(81,265,30,24,a,r5,30,24);draw(81,265,30,24,a-100,r5,30,24);draw(81,265,30,24,a-200,r5,30,24);draw(81,265,30,24,a-300,r5,30,24)};